{"version":3,"sources":["webpack:///./src/components/dialogs/ViewOfferDialog.vue?014b","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./src/components/dialogs/ViewOfferDialog.vue","webpack:///./src/components/dialogs/ViewOfferDialog.vue?3f7a","webpack:///./src/components/dialogs/ViewOfferDialog.vue?592c","webpack:///./node_modules/core-js/modules/es.array.every.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","$emit","_v","_s","priceInEth","offer","buyer","offeredCryptomons","length","_e","offeredCryptomonsAsList","staticClass","acceptOffer","rejectOffer","withdrawOffer","staticRenderFns","_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","prototype","toString","call","_arr","_n","_d","undefined","_i","next","done","push","value","err","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","nonIterableRest","isReady","loadMissingCryptomons","missingIds","pickBy","val","keys","map","toNumber","$store","dispatch","FetchCryptomonsByIds","AcceptOffer","cryptomonId","RejectOffer","WithdrawOffer","every","values","getCryptomonById","getters","GetCryptomonById","id","keyBy","mapValues","state","web3","utils","fromWei","price","owner","DefaultAccount","String","components","CryptomonList","Dialog","component","$","$every","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments"],"mappings":"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","file":"js/chunk-02e4b1d4.cf71d687.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dialog',{attrs:{\"title\":\"Offer details\"},on:{\"cancel\":function($event){return _vm.$emit('cancel')}}},[_c('div',[_c('b',[_vm._v(\"Price:\")]),_vm._v(\" \"+_vm._s(_vm.priceInEth)+\" ETH\")]),_c('div',[_c('b',[_vm._v(\"Buyer:\")]),_vm._v(\" \"+_vm._s(_vm.offer.buyer))]),_c('div',[_c('b',[_vm._v(\"Offered Cryptomons:\")]),_vm._v(\" \"),(_vm.offer.offeredCryptomons.length === 0)?_c('i',[_vm._v(\"None\")]):_vm._e()]),(_vm.isReady)?_c('CryptomonList',{attrs:{\"simple\":true,\"cryptomons\":_vm.offeredCryptomonsAsList}}):_vm._e(),_c('div',{staticClass:\"button-group\"},[(_vm.isSeller)?_c('button',{on:{\"click\":function($event){return _vm.acceptOffer()}}},[_vm._v(\"Accept\")]):_vm._e(),(_vm.isSeller)?_c('button',{staticClass:\"bg-red\",on:{\"click\":function($event){return _vm.rejectOffer()}}},[_vm._v(\"Reject\")]):_vm._e(),(_vm.isBuyer)?_c('button',{staticClass:\"bg-red\",on:{\"click\":function($event){return _vm.withdrawOffer()}}},[_vm._v(\"Withdraw\")]):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from 'vue-class-component';\nimport { Prop, Vue } from 'vue-property-decorator';\nimport _ from 'lodash';\nimport Dialog from '@/components/generic/Dialog.vue';\nimport { Cryptomon, Offer } from '@/game';\nimport Getters from '@/store/getters';\nimport Actions from '@/store/actions';\nimport CryptomonList from '@/components/CryptomonList.vue';\n\n@Component({\n  components: { CryptomonList, Dialog },\n})\nexport default class ViewOfferDialog extends Vue {\n  @Prop(Offer) offer!: Offer;\n\n  @Prop(String) owner!: string;\n\n  created() {\n    if (!this.isReady) {\n      this.loadMissingCryptomons();\n    }\n  }\n\n  public get isReady() {\n    return _.every(_.values(this.offeredCryptomons));\n  }\n\n  public get offeredCryptomons(): Record<number, Cryptomon | undefined> {\n    const getCryptomonById = this.$store.getters[Getters.GetCryptomonById];\n    return _(this.offer.offeredCryptomons)\n      .map(id => [id, getCryptomonById(_.toNumber(id))])\n      .keyBy(([id, val]) => id)\n      .mapValues(([id, val]) => val)\n      .value();\n  }\n\n  public get offeredCryptomonsAsList(): Cryptomon[] {\n    return _.values(this.offeredCryptomons) as Cryptomon[];\n  }\n\n  public get priceInEth() {\n    return this.$store.state.web3.utils.fromWei(this.offer.price, 'ether');\n  }\n\n  private async loadMissingCryptomons() {\n    const missingIds = _(this.offeredCryptomons)\n      .pickBy(val => !val)\n      .keys()\n      .map(_.toNumber)\n      .value();\n    await this.$store.dispatch(Actions.FetchCryptomonsByIds, missingIds);\n  }\n\n  public get isSeller() {\n    return this.owner === this.$store.getters[Getters.DefaultAccount];\n  }\n\n  public get isBuyer() {\n    return this.offer.buyer === this.$store.getters[Getters.DefaultAccount];\n  }\n\n  public async acceptOffer() {\n    await this.$store.dispatch(Actions.AcceptOffer, this.offer.cryptomonId);\n    this.$emit('offer-accepted');\n  }\n\n  public async rejectOffer() {\n    await this.$store.dispatch(Actions.RejectOffer, this.offer.cryptomonId);\n    this.$emit('offer-rejected');\n  }\n\n  public async withdrawOffer() {\n    await this.$store.dispatch(Actions.WithdrawOffer, this.offer.cryptomonId);\n    this.$emit('offer-withdrawn');\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewOfferDialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewOfferDialog.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ViewOfferDialog.vue?vue&type=template&id=522d3be8&\"\nimport script from \"./ViewOfferDialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./ViewOfferDialog.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $every = require('../internals/array-iteration').every;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('every');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('every');\n\n// `Array.prototype.every` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.every\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}