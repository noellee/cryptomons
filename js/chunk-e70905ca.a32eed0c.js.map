{"version":3,"sources":["webpack:///./src/components/dialogs/ViewChallengeDialog.vue?17e1","webpack:///./src/assets/winner-badge.png","webpack:///./src/assets/loser-badge.png","webpack:///./src/components/dialogs/ViewChallengeDialog.vue?8e7c","webpack:///./src/components/misc/FightResultBadge.vue?c05d","webpack:///./src/components/misc/FightResultBadge.vue","webpack:///./src/components/misc/FightResultBadge.vue?b8f9","webpack:///./src/components/misc/FightResultBadge.vue?5a3a","webpack:///./src/components/dialogs/ViewChallengeDialog.vue","webpack:///./src/components/dialogs/ViewChallengeDialog.vue?6792","webpack:///./src/components/dialogs/ViewChallengeDialog.vue?78e5","webpack:///./src/components/misc/FightResultBadge.vue?50ce"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","$emit","_v","_s","challenger","name","_e","opponent","staticClass","result","challengerWon","opponentWon","isOpponentOwner","stake","acceptChallenge","rejectChallenge","isChallengerOwner","withdrawChallenge","staticRenderFns","imageUrl","badge","TypeError","String","component","challenge","_opponentId","_challengerId","init","cryptomon","findChallengeByChallengerId","id","opponentId","challengerId","loadMissingCryptomons","cached","$store","getters","GetChallengeByChallengerId","game","state","ids","push","dispatch","FetchCryptomonsByIds","onFightResult","AcceptChallenge","RejectChallenge","WithdrawChallenge","GetCryptomonById","web3","utils","fromWei","toString","DefaultAccount","owner","defaultAccount","components","FightResultBadge","CryptomonCard","Dialog"],"mappings":"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","file":"js/chunk-e70905ca.a32eed0c.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewChallengeDialog.vue?vue&type=style&index=0&id=5ddd9bb0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewChallengeDialog.vue?vue&type=style&index=0&id=5ddd9bb0&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/winner-badge.28ca623d.png\";","module.exports = __webpack_public_path__ + \"img/loser-badge.2e6dc667.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dialog',{attrs:{\"title\":\"View challenge\"},on:{\"cancel\":function($event){return _vm.$emit('close-dialog')}}},[(_vm.isReady)?[_c('p',[(_vm.isReady)?_c('b',[_vm._v(_vm._s(_vm.challenger.name))]):_vm._e(),_vm._v(\" challenged \"),_c('b',[_vm._v(_vm._s(_vm.opponent.name))]),_vm._v(\" to a fight :o \")]),_c('div',{staticClass:\"challenge-details\"},[_c('div',{staticClass:\"card-container\"},[(_vm.result)?_c('FightResultBadge',{attrs:{\"badge\":_vm.result.challengerWon ? 'winner' : 'loser'}}):_vm._e(),_c('CryptomonCard',{attrs:{\"cryptomon\":_vm.challenger,\"simple\":true}})],1),_c('span',{staticClass:\"vs\"},[_vm._v(\"vs.\")]),_c('div',{staticClass:\"card-container\"},[(_vm.result)?_c('FightResultBadge',{attrs:{\"badge\":_vm.result.opponentWon ? 'winner' : 'loser'}}):_vm._e(),_c('CryptomonCard',{attrs:{\"cryptomon\":_vm.opponent,\"simple\":true}})],1)]),(!_vm.result && _vm.isOpponentOwner)?_c('p',[_vm._v(\"Bet \"),_c('b',[_vm._v(_vm._s(_vm.stake))]),_vm._v(\" ETH?\")]):_vm._e(),(!_vm.result && _vm.isOpponentOwner)?_c('div',{staticClass:\"button-group\"},[_c('button',{on:{\"click\":_vm.acceptChallenge}},[_vm._v(\"Challenge accepted.\")]),_c('button',{staticClass:\"bg-red\",on:{\"click\":_vm.rejectChallenge}},[_vm._v(\"Reject challenge\")])]):_vm._e(),(!_vm.result && _vm.isChallengerOwner)?_c('div',{staticClass:\"button-group\"},[_c('button',{staticClass:\"bg-red\",on:{\"click\":_vm.withdrawChallenge}},[_vm._v(\"Withdraw from challenge\")])]):_vm._e()]:_c('p',[_vm._v(\"Loading...\")])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('img',{staticClass:\"badge\",attrs:{\"src\":_vm.imageUrl,\"alt\":_vm.badge}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n/* eslint-disable global-require */\n\nimport { Prop, Vue } from 'vue-property-decorator';\nimport Component from 'vue-class-component';\n\ntype BadgeType = 'winner' | 'loser';\n\n@Component\nexport default class FightResultBadge extends Vue {\n  @Prop(String) badge!: BadgeType;\n\n  get imageUrl() {\n    switch (this.badge) {\n      case 'winner':\n        return require('@/assets/winner-badge.png');\n      case 'loser':\n        return require('@/assets/loser-badge.png');\n      default:\n        throw new TypeError();\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FightResultBadge.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FightResultBadge.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FightResultBadge.vue?vue&type=template&id=22d7e867&scoped=true&\"\nimport script from \"./FightResultBadge.vue?vue&type=script&lang=ts&\"\nexport * from \"./FightResultBadge.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FightResultBadge.vue?vue&type=style&index=0&id=22d7e867&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22d7e867\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Component from 'vue-class-component';\nimport { Prop, Vue } from 'vue-property-decorator';\nimport Dialog from '@/components/generic/Dialog.vue';\nimport Getters from '@/store/getters';\nimport { Cryptomon, CryptomonGame } from '@/game';\nimport Actions from '@/store/actions';\nimport CryptomonCard from '@/components/CryptomonCard.vue';\nimport FightResult from '@/game/FightResult';\nimport Challenge from '@/game/Challenge';\nimport FightResultBadge from '@/components/misc/FightResultBadge.vue';\n\n@Component({\n  components: { FightResultBadge, CryptomonCard, Dialog },\n})\nexport default class ViewChallengeDialog extends Vue {\n  @Prop(Cryptomon) cryptomon!: Cryptomon;\n\n  result: FightResult | null = null;\n\n  challenge: Challenge | null = null;\n\n  private _opponentId: string | null = null;\n\n  private _challengerId: string | null = null;\n\n  created() {\n    this.init();\n  }\n\n  async init() {\n    if (this.cryptomon.challenge) {\n      this.challenge = this.cryptomon.challenge;\n    } else {\n      this.challenge = await this.findChallengeByChallengerId(this.cryptomon.id);\n    }\n    if (this.challenge === null) throw new TypeError();\n    this._opponentId = this.challenge.opponentId;\n    this._challengerId = this.challenge.challengerId;\n    await this.loadMissingCryptomons();\n  }\n\n  public get isReady(): boolean {\n    return !!this.challenger && !!this.opponent;\n  }\n\n  async findChallengeByChallengerId(id: string): Promise<Challenge> {\n    const cached = this.$store.getters[Getters.GetChallengeByChallengerId](id);\n    if (cached) return cached;\n    const game = this.$store.state.game as CryptomonGame;\n    const challenge = await game.findChallengeByChallengerId(id);\n    if (!challenge) throw new TypeError();\n    return challenge;\n  }\n\n  public get challenger(): Cryptomon | null {\n    if (this._challengerId === null) return null;\n    return this.$store.getters[Getters.GetCryptomonById](this._challengerId);\n  }\n\n  public get opponent(): Cryptomon | null {\n    if (this._opponentId === null) return null;\n    return this.$store.getters[Getters.GetCryptomonById](this._opponentId);\n  }\n\n  public get stake(): string {\n    if (!this.challenge) return '0';\n    return this.$store.state.web3.utils.fromWei(this.challenge.stake.toString(), 'ether');\n  }\n\n  public get defaultAccount(): string {\n    return this.$store.getters[Getters.DefaultAccount];\n  }\n\n  public get isOpponentOwner(): boolean {\n    return this.opponent?.owner === this.defaultAccount;\n  }\n\n  public get isChallengerOwner(): boolean {\n    return this.challenger?.owner === this.defaultAccount;\n  }\n\n  public async loadMissingCryptomons() {\n    if (!this._challengerId || !this._opponentId) throw new TypeError();\n    const ids = [];\n    if (!this.challenger) ids.push(this._challengerId);\n    if (!this.opponent) ids.push(this._opponentId);\n    await this.$store.dispatch(Actions.FetchCryptomonsByIds, ids);\n  }\n\n  public async acceptChallenge() {\n    if (this.challenge === null || this._opponentId === null) throw new TypeError();\n    const { stake } = this.challenge;\n    const game = this.$store.state.game as CryptomonGame;\n    game.onFightResult(this._opponentId, (result) => { this.result = result; });\n    await this.$store.dispatch(Actions.AcceptChallenge, { id: this._opponentId, stake });\n  }\n\n  public async rejectChallenge() {\n    if (this._opponentId === null) throw new TypeError();\n    await this.$store.dispatch(Actions.RejectChallenge, this._opponentId);\n    this.$emit('close-dialog');\n  }\n\n  public async withdrawChallenge() {\n    if (this._opponentId === null) throw new TypeError();\n    await this.$store.dispatch(Actions.WithdrawChallenge, this._opponentId);\n    this.$emit('close-dialog');\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewChallengeDialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewChallengeDialog.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ViewChallengeDialog.vue?vue&type=template&id=5ddd9bb0&scoped=true&\"\nimport script from \"./ViewChallengeDialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./ViewChallengeDialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ViewChallengeDialog.vue?vue&type=style&index=0&id=5ddd9bb0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ddd9bb0\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FightResultBadge.vue?vue&type=style&index=0&id=22d7e867&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FightResultBadge.vue?vue&type=style&index=0&id=22d7e867&scoped=true&lang=css&\""],"sourceRoot":""}